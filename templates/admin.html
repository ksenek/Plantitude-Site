{% extends 'base.html' %}

{% block pageheading %} Administration {% endblock %}

{% block main %}
<h3>Order Admin</h3>
<p><a href="/process_orders/1">Process Orders</a></p>
<p><a href="/process_orders/0">List Processed Orders</a></p>

<h3> Category Admin </h3>
<h4> Add a category</h4>
<form class ="myform" method="post" action="/add_category">
  <div class ="form-group">
    <div class ="form-label"><label for="name">Category Name:</label></div>
    <div class ="form-element"><input type="text" name="name" id="name" required></div>
  </div>
  <div class ="form-group">
    <div class ="form-label"></div>
    <div class ="form-element"><input type="submit" value ="Add Category"></div>
  </div>
</form>

<h4> Delete a category </h4>
<form class ="myform" method="post" action="/delete_category">
  <div class ="form-group">
    <div class ="form-label"><label for="name">Category Name:</label></div>
    <div class ="form-element">
      <select id="category_id" name="cat_id" 
        {% for category in categories %}
          <option value ="{{ category[0] }}, {{ category[1] }}">{{ category[1] }}</option>
        {% endfor %}
      </select>
    </div>
  </div>
  <div class ="form-group">
    <div class ="form-label"></div>
    <div class ="form-element"><input type="submit" value ="Delete Category"></div>
  </div>
</form>

<h3>Product Admin</h3>

<h4>Add a product</h4>
<form class="myform" method="post" action="/add_product">
  <!-- Name -->
  <div class="form-group">
    <div class="form-label"><label for="name">Product Name:</label></div>
    <div class="form-element"><input type="text" name="name" id="name" required></div>
  </div>

  <!-- Description -->
  <div class="form-group">
    <div class="form-label"><label for="description">Product Description:</label></div>
    <div class="form-element"><input type="text" name="description" id="description" required></div>
  </div>

  <!-- Size -->
  <div class="form-group">
    <div class="form-label"><label for="size">Product Volume:</label></div>
    <div class="form-element"><input type="text" name="size" id="size" required></div>
  </div>

  <!-- Product Image Choice -->
  <div class="image-choice">
    <h3>Product Image</h3>
    <p>Select <strong>either</strong> the placeholder image OR enter your own filename.</p>

    <div class="image-option">
      <input type="radio" id="use_noimage" name="image_option" value="noimage" checked>
      <label for="use_noimage">Use placeholder (noimage)</label>
    </div>

    <div class="image-option">
      <input type="radio" id="use_custom" name="image_option" value="custom">
      <label for="use_custom">Use custom image:</label>
      <input type="text" name="custom_image" placeholder="e.g. monstera">
    </div>

    <!-- Default preview -->
    <div class="image-preview">
      <p>Preview:</p>
      <img src="/static/images/noimage.jpg" alt="Placeholder preview" class="product-image">
    </div>
  </div>

  <!-- Price -->
  <div class="form-group">
    <div class="form-label"><label for="price">Product Price:</label></div>
    <div class="form-element"><input type="text" name="price" id="price" required></div>
  </div>

  <!-- Category -->
  <div class="form-group">
    <div class="form-label"><label for="cat_id">Category:</label></div>
    <div class="form-element">
      <select id="cat_id" name="cat_id" required>
        {% for category in categories %}
          <option value="{{ category[0] }}">{{ category[1] }}</option>
        {% endfor %}
      </select>
    </div>
  </div>

  <!-- Submit -->
  <div class="button-group">
    <input type="submit" value="Add Product" class="button">
    <a href="/admin" class="button cancel-button">Cancel</a>
  </div>
</form>



<h4> Delete a product </h4>
<form class="myform" method="post" action="/delete_product">
  <div class ="form-group">
    <div class ="form-label"><label for="product_id">Product Name:</label></div>
    <div class ="form-element">
      <select id="product_id" name="product_id" >
        {% for product in products %}
          <option value ="{{ product[0] }}, {{ product[1] }}">{{ product[1] }}</option>
        {% endfor %}
      </select>
    </div>
  </div>
  <div class ="form-group">
    <div class ="form-label"></div>
    <div class ="form-element"><input type="submit" value ="Delete Product"></div>
  </div>
</form>
  

<h4>Edit a product</h4>
<form class="myform" method="get" action="/edit_product">
  <div class="form-group">
    <div class="form-label">
      <label for="product_id">Select Product:</label>
    </div>
    <div class="form-element">
      <select name="product_id" id="product_id">
        {% for product in products %}
          <option value="{{ product[0] }}">{{ product[1] }}</option>
        {% endfor %}
      </select>
    </div>
  </div>
  <div class="form-group">
    <div class="form-label"></div>
    <div class="form-element">
      <input type="submit" value="Edit Product">
    </div>
  </div>
</form>

{% endblock %}
